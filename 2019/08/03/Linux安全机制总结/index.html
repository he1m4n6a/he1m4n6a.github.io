<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="He1m4n6a的博客">
    <meta name="keyword"  content="腾讯">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        Linux安全机制总结 - He1m4n6a的博客 | He1m4n6a&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> 路漫漫其修远兮，吾将上下而求索。 </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar ">
            <img src="/img/avatar.jpg" />
        </div>
        <div class="name">
            <i>He1m4n6a</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archive">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Linux权限"><span class="toc-text">Linux权限</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#capabilities"><span class="toc-text">capabilities</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#什么是capabilities"><span class="toc-text">什么是capabilities</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#capabilities对应的特权操作"><span class="toc-text">capabilities对应的特权操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#查看进程capabilities"><span class="toc-text">查看进程capabilities</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#查看文件的getcap"><span class="toc-text">查看文件的getcap</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AppArmor"><span class="toc-text">AppArmor</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#AppArmor简介"><span class="toc-text">AppArmor简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置文件的编写"><span class="toc-text">配置文件的编写</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#apparmor的用法相关"><span class="toc-text">apparmor的用法相关</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#查询当前Apparmor的状态"><span class="toc-text">查询当前Apparmor的状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#更改profile文件的状态"><span class="toc-text">更改profile文件的状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#profile文件的构建与管理"><span class="toc-text">profile文件的构建与管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#profile编写"><span class="toc-text">profile编写</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SElinux"><span class="toc-text">SElinux</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#什么是SELinux"><span class="toc-text">什么是SELinux</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SELinux模式"><span class="toc-text">SELinux模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SELinux的模式查看与修改"><span class="toc-text">SELinux的模式查看与修改</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#查看程序或文件的SELinux信息"><span class="toc-text">查看程序或文件的SELinux信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置示例"><span class="toc-text">配置示例</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#总结"><span class="toc-text">总结</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> 路漫漫其修远兮，吾将上下而求索。 </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        Linux安全机制总结
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2019-08-03 23:11:15</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#capabilites" title="capabilites">capabilites</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#apparmor" title="apparmor">apparmor</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#selinux" title="selinux">selinux</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <h1 id="Linux权限"><a href="#Linux权限" class="headerlink" title="Linux权限"></a>Linux权限</h1><p>在Linux 系统中，一般习惯使用ROOT和非ROOT来表示用户（进程）的权限。ROOT 用户是指系统中 UID 为0的用户，具备最高权限。非 ROOT 用户指UID≠0的用户，通常就是我们所说的普通用户。Linux中UID又分做RUID、EUID、SUID。</p>
<ul>
<li><p>RUID是真实UID, 用于在系统中标识一个用户是谁，当用户使用用户名和密码成功登录后，Linux系统唯一确定了他的RUID。</p>
</li>
<li><p>EUID表示进程运行时的有效ID，并不需要与RUID相同，用于系统决定用户对资源的访问权限。一般所说的特权进程就是EUID为0的进程。</p>
</li>
<li><p>SUID用于<strong>二进制文件对外开放权限</strong>，让程序在执行过程中拥有文件拥有者的权限 。</p>
</li>
</ul>
<h1 id="capabilities"><a href="#capabilities" class="headerlink" title="capabilities"></a>capabilities</h1><h2 id="什么是capabilities"><a href="#什么是capabilities" class="headerlink" title="什么是capabilities"></a>什么是capabilities</h2><p>Capabilities机制，是在Linux内核2.2之后引入的。它将root用户的权限细分为不同的领域，可以分别启用或禁用。从而，在实际进行特权操作时，如果euid不是root，便会检查是否具有该特权操作所对应的capabilities，并以此为依据，决定是否可以执行特权操作。 </p>
<p><strong>线程capabilities包含以下5个capabilities集合：</strong></p>
<ol>
<li><p><strong>Effective：</strong>内核进行线程capabilities检查时实际使用到的集合</p>
</li>
<li><p><strong>Inheritable</strong>：当程序对应的可执行文件设置了inheritable bit位时，调用execve执行该程序会继承调用者的Inheritable集合，并将其加入到permitted集合。但在非root用户下执行execve时，通常不会保留inheritable 集合，可以考虑使用ambient 集合，当一个程序drop掉一个capabilities时，只能通过execve执行SUID置位的程序或者程序的文件带有该capabilities的方式来获得该capabilities</p>
</li>
<li><p><strong>permitted：</strong>effective集合和inheritable集合的超集，限制了它们的范围，因此如果一个capabilities不存在permitted中，是不可以通过cap_set_proc来获取的。当一个线程从permitted集合中丢弃一个capabilities时，只能通过获取程序可执行文件的capabilities或execve一个set-user-ID-root（以root用户权限运行的）程序来获得</p>
</li>
<li><p><strong>ambient ：</strong>是在内核4.3之后引入的，用于补充Inheritable使用上的缺陷，ambien集合可以使用函数prctl修改。当程序由于SUID(SGID)bit位而转变UID(GID)，或执行带有文件capabilities的程序时会导致该集合被清空</p>
</li>
<li><p><strong>Bounding：</strong>权限边界，Linux2.6.25引入，cap_bset。</p>
</li>
</ol>
<ul>
<li><p><strong>P</strong>定义了进程能力集的上限；</p>
</li>
<li><p><strong>E</strong>定义了实际生效的能力集，其他能力集都是为了最终影响能力集；</p>
</li>
<li><p><strong>I</strong> 定义了可以exec方式继承的能力集（fork子进程继承父进程所有权限）；P、E、I都在Linux2.6引入。</p>
</li>
<li><p><strong>B</strong>在Linux2.6.25中引入，主要限制通过exec获得的能力，是I的超集。</p>
<ul>
<li>进程运行时，不能向B添加新能力。</li>
<li>一旦能力被从B中删除，不能添加回来；</li>
<li>能力被从B中删除后，若已经在I中存在，不删除。</li>
</ul>
</li>
</ul>
<h2 id="capabilities对应的特权操作"><a href="#capabilities对应的特权操作" class="headerlink" title="capabilities对应的特权操作"></a>capabilities对应的特权操作</h2><table>
<thead>
<tr>
<th>编号</th>
<th>Capabilities  list</th>
<th>风险级别</th>
<th>建议</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>CAP_AUDIT_CONTROL</td>
<td>中</td>
<td>谨慎使用</td>
</tr>
<tr>
<td>2</td>
<td>CAP_AUDIT_READ</td>
<td>低</td>
<td>谨慎使用</td>
</tr>
<tr>
<td>3</td>
<td>CAP_AUDIT_WRITE</td>
<td>中</td>
<td>谨慎使用</td>
</tr>
<tr>
<td>4</td>
<td>CAP_BLOCK_SUSPEND</td>
<td>低</td>
<td>正常使用</td>
</tr>
<tr>
<td>5</td>
<td>CAP_CHOWN</td>
<td>高</td>
<td>禁止使用</td>
</tr>
<tr>
<td>6</td>
<td>CAP_DAC_OVERRIDE</td>
<td>高</td>
<td>禁止使用</td>
</tr>
<tr>
<td>7</td>
<td>CAP_DAC_READ_SEARCH</td>
<td>高</td>
<td>禁止使用</td>
</tr>
<tr>
<td>8</td>
<td>CAP_FOWNER</td>
<td>高</td>
<td>禁止使用</td>
</tr>
<tr>
<td>9</td>
<td>CAP_FSETID</td>
<td>中</td>
<td>禁止使用</td>
</tr>
<tr>
<td>10</td>
<td>CAP_IPC_LOCK</td>
<td>低/无</td>
<td>正常使用</td>
</tr>
<tr>
<td>11</td>
<td>CAP_IPC_OWNER</td>
<td>中</td>
<td>禁止使用</td>
</tr>
<tr>
<td>12</td>
<td>CAP_KILL</td>
<td>中</td>
<td>禁止使用</td>
</tr>
<tr>
<td>13</td>
<td>CAP_LEASE</td>
<td>中/低</td>
<td>禁止使用</td>
</tr>
<tr>
<td>14</td>
<td>CAP_LINUX_IMMUTABLE</td>
<td>高</td>
<td>禁止使用</td>
</tr>
<tr>
<td>15</td>
<td>CAP_MAC_ADMIN</td>
<td>中/高</td>
<td>禁止使用</td>
</tr>
<tr>
<td>16</td>
<td>CAP_MAC_OVERRIDE</td>
<td>中/高</td>
<td>禁止使用</td>
</tr>
<tr>
<td>17</td>
<td>CAP_MKNOD</td>
<td>高</td>
<td>禁止使用</td>
</tr>
<tr>
<td>18</td>
<td>CAP_NET_ADMIN</td>
<td>中/高</td>
<td>谨慎使用</td>
</tr>
<tr>
<td>19</td>
<td>CAP_NET_BIND_SERVICE</td>
<td>低</td>
<td>谨慎使用</td>
</tr>
<tr>
<td>20</td>
<td>CAP_NET_BROADCAST</td>
<td>低/无</td>
<td>禁止使用</td>
</tr>
<tr>
<td>21</td>
<td>CAP_NET_RAW</td>
<td>中/低</td>
<td>谨慎使用</td>
</tr>
<tr>
<td>22</td>
<td>CAP_SETGID</td>
<td>高</td>
<td>禁止使用</td>
</tr>
<tr>
<td>23</td>
<td>CAP_SETFCAP</td>
<td>高</td>
<td>禁止使用</td>
</tr>
<tr>
<td>24</td>
<td>CAP_SETPCAP</td>
<td>高</td>
<td>禁止使用</td>
</tr>
<tr>
<td>25</td>
<td>CAP_SETUID</td>
<td>高</td>
<td>禁止使用</td>
</tr>
<tr>
<td>26</td>
<td>CAP_SYS_ADMIN</td>
<td>高</td>
<td>禁止使用</td>
</tr>
<tr>
<td>27</td>
<td>CAP_SYS_BOOT</td>
<td>中/低</td>
<td>禁止使用</td>
</tr>
<tr>
<td>28</td>
<td>CAP_SYS_CHROOT</td>
<td>高</td>
<td>谨慎使用</td>
</tr>
<tr>
<td>29</td>
<td>CAP_SYS_MODULE</td>
<td>高</td>
<td>禁止使用</td>
</tr>
<tr>
<td>30</td>
<td>CAP_SYS_NICE</td>
<td>低/无</td>
<td>正常使用</td>
</tr>
<tr>
<td>31</td>
<td>CAP_SYS_PACCT</td>
<td>低</td>
<td>正常使用</td>
</tr>
<tr>
<td>32</td>
<td>CAP_SYS_PTRACE</td>
<td>高</td>
<td>谨慎使用</td>
</tr>
<tr>
<td>33</td>
<td>CAP_SYS_RAWIO</td>
<td>高</td>
<td>禁止使用</td>
</tr>
<tr>
<td>34</td>
<td>CAP_SYS_RESOURCE</td>
<td>中/低</td>
<td>正常使用</td>
</tr>
<tr>
<td>35</td>
<td>CAP_SYS_TIME</td>
<td>低</td>
<td>谨慎使用</td>
</tr>
<tr>
<td>36</td>
<td>CAP_SYS_TTY_CONFIG</td>
<td>低</td>
<td>正常使用</td>
</tr>
<tr>
<td>37</td>
<td>CAP_SYSLOG</td>
<td>低</td>
<td>正常使用</td>
</tr>
<tr>
<td>38</td>
<td>CAP_WAKE_ALARM</td>
<td>低</td>
<td>正常使用</td>
</tr>
</tbody></table>
<h2 id="查看进程capabilities"><a href="#查看进程capabilities" class="headerlink" title="查看进程capabilities"></a>查看进程capabilities</h2><ul>
<li>通过/proc/PID/status 查看：</li>
</ul>
<p><img src="/images/b1/1.png" alt="img"></p>
<ul>
<li>通过工具查看，例如getpcaps PID </li>
</ul>
<p><img src="/images/b2/2.png" alt="img"></p>
<h2 id="查看文件的getcap"><a href="#查看文件的getcap" class="headerlink" title="查看文件的getcap"></a>查看文件的getcap</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">getcap</span> /bin/ping</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"> /bin/ping = cap_net_raw+ep</span></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">$ getfattr -d -m <span class="string">"^security\\."</span> /bin/ping</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"> \<span class="comment"># file: bin/ping</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"> security.capability=0sAQAAAgAgAAAAAAAAAAAAAAAAAAA=</span></pre></td></tr></table></figure>

<h1 id="AppArmor"><a href="#AppArmor" class="headerlink" title="AppArmor"></a>AppArmor</h1><h2 id="AppArmor简介"><a href="#AppArmor简介" class="headerlink" title="AppArmor简介"></a>AppArmor简介</h2><p>AppArmor(Application Armor)是<strong>Linux内核的一个安全模块</strong>，AppArmor允许系统管理员将每个程序与一个安全配置文件关联，从而限制程序的功能。简单的说，AppArmor是与SELinux类似的一个访问控制系统，通过它你可以指定程序可以读、写或运行哪些文件，是否可以打开网络端口等。作为对传统Unix的自主访问控制模块的补充，AppArmor提供了强制访问控制机制，它已经被整合到2.6版本的Linux内核中。 </p>
<p>Apparmor有两种工作模式：<strong>enforcement、complain/learning</strong></p>
<ul>
<li><p><strong>Enforcement</strong> – 在这种模式下，配置文件里列出的限制条件都会得到执行，并且对于违反这些限制条件的程序会进行日志记录。</p>
</li>
<li><p><strong>Complain</strong> – 在这种模式下，配置文件里的限制条件不会得到执行，Apparmor只是对程序的行为进行记录。例如程序可以写一个在配置文件里注明只读的文件，但Apparmor不会对程序的行为进行限制，只是进行记录。</p>
</li>
</ul>
<p>那既然complain不能限制程序，为什么还需要这种模式呢，因为——如果某个程序的行为不符合其配置文件的限制，可以将其行为记录到系统日志，并且可以根据程序的行为，将日志转换成配置文件。当然我们可以随时对配置文件进行修改，选择自己需要的模式。</p>
<p>Apparmor可以对程序进行多方面的限制，这里我只介绍部分常用到的</p>
<p><strong>（1）文件系统的访问控制</strong></p>
<p>Apparmor可以对某一个文件，或者某一个目录下的文件进行访问控制，包括以下几种访问模式：</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">r = read</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">w = write</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">l = link</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">k = lock</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">a = append</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">ix = inherit = Inherit the parent's profile.</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">px = requires a separate profile exists for the application, with environment scrubbing.</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">Px = requires a separate profile exists for the application, without environment scrubbing.</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">ux and Ux = Allow execution of an application unconfined, with and without environmental scrubbing. (use with caution if at all).</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">m = allow executable mapping.</span></pre></td></tr></table></figure>

<p>在配置文件中的写法，如</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">如 /tmp r, (表示可对/tmp目录下的文件进行读取)</span></pre></td></tr></table></figure>

<p>注意一点，没在配置文件中列出的文件，<strong>程序是不能访问的，这有点像白名单。</strong></p>
<p><strong>（2）资源限制</strong></p>
<p>Apparmor可以提供类似系统调用setrlimit一样的方式来限制程序可以使用的资源。要限制资源，可在配置文件中这样写：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">set rlimit [resource] &lt;&#x3D; [value],</span></pre></td></tr></table></figure>

<p>其resource代表某一种资源，value代表某一个值，要对程序可以使用的虚拟内存做限制时，可以这样写：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">set rlimit as&lt;&#x3D;1M, （可以使用的虚拟内存最大为1M）</span></pre></td></tr></table></figure>

<p>注意：Apparmor可以对程序要使用多种资源进行限制（fsize,data,stack,core,rss,as,memlock,msgqueue等），但暂不支持对程序可以使用CPU时间进行限制。</p>
<p><strong>（3）访问网络</strong></p>
<p>Apparmor可以程序是否可以访问网络进行限制，在配置文件里的语法是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">network [ [domain] [type] [protocol] ]</span></pre></td></tr></table></figure>

<p>了解网络编程的应该知道domain、type和protocol是什么。要让程序可以进行所有的网络操作，只需在配置文件中写：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">network,</span></pre></td></tr></table></figure>

<p>要允许程序使用在IPv4下使用TCP协议，可以这样写：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">network inet tcp,</span></pre></td></tr></table></figure>

<p><strong>（4）capability条目</strong></p>
<p>在linux的手册页里面有一个capablities列表，apparmor可以限制程序是否可以进行列表里的操作，如：capability setgid,（允许程序进行setgid操作）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">Capability statements are simply the word capability followed by the name of the POSIX.1e capability as defined in the capabilities(7) man page.</span></pre></td></tr></table></figure>

<h2 id="配置文件的编写"><a href="#配置文件的编写" class="headerlink" title="配置文件的编写"></a>配置文件的编写</h2><p>前面提到，编写完配置文件后，要把文件放到/etc/apparmor.d这个目录下，其实有更方便的方法，直接在命令行里面用：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">sudo genprof [filename]</span></pre></td></tr></table></figure>

<p>就可以为指定的程序创建一个配置文件，并把它放到该目录。如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">sudo genprof <span class="string">'/home/361way/apparmor-helper/demoexe</span></span></pre></td></tr></table></figure>

<p>建立的配置文件内容如下</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tunables/global&gt;  </span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">/<span class="built_in">home</span>/<span class="number">361</span>way/apparmor-helper/demoexe &#123;     </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">   <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;abstractions/base&gt;</span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<p>注意，该文件默认使用enforcement模式，要修改模式，只需将配置文件改为：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tunables/global&gt;  </span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">/<span class="built_in">home</span>/<span class="number">361</span>way/apparmor-helper/demoexe  flags=(complain)&#123;     </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">	#include &lt;abstractions/base&gt;  </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<p>flags=(complain)前面的部分是文件的路径，作用是为这个配置文件绑定某个程序。那接下来就可以在配置文件中添加相应的内容，在大括号中加上：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">/home/361way/apparmor-helper/data rw,    </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">	<span class="built_in">set</span> rlimit stack&lt;=1M,</span></pre></td></tr></table></figure>

<p>然后再执行命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/apparmor reload</span></pre></td></tr></table></figure>

<p>就可以重新加载配置文件，使配置文件生效。</p>
<h2 id="apparmor的用法相关"><a href="#apparmor的用法相关" class="headerlink" title="apparmor的用法相关"></a>apparmor的用法相关</h2><h4 id="查询当前Apparmor的状态"><a href="#查询当前Apparmor的状态" class="headerlink" title="查询当前Apparmor的状态"></a>查询当前<a href="https://wiki.debian.org/AppArmor/HowTo" target="_blank" rel="noopener">Apparmor</a>的状态</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">sudo apparmor_status</span></pre></td></tr></table></figure>

<p><img src="/images/b1/3.png" alt="img"></p>
<h4 id="更改profile文件的状态"><a href="#更改profile文件的状态" class="headerlink" title="更改profile文件的状态"></a>更改profile文件的状态</h4><p>如果想把某个profile置为enforce状态，执行如下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">sudo enforce &lt;application_name&gt;</span></pre></td></tr></table></figure>

<p>如果想把某个profile置为complain状态，执行如下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">sudo complain &lt;application_name&gt;</span></pre></td></tr></table></figure>

<p>在修改了某个profile的状态后，执行如下命令使之生效：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/apparmor restart</span></pre></td></tr></table></figure>

<h4 id="profile文件的构建与管理"><a href="#profile文件的构建与管理" class="headerlink" title="profile文件的构建与管理"></a>profile文件的构建与管理</h4><p>ubuntu发行版预定义了一些profile，可以通过如下命令安装ubuntu下的些预定义的profile文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">sudo apt-get install apparmor-profiles</span></pre></td></tr></table></figure>

<p>通过工具来管理profile，比较著名是：apparmor-utils，通过如下命令进行安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">sudo apt-get install apparmor-utils</span></pre></td></tr></table></figure>

<p>此工具最常用的两个命令为：aa-genprof和aa-logprof，前者用来生成profile文件，后者用来查询处于apparmor的日志记录，如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">sudo aa-genprof slapd  //生成openldap程序的profile文件</span></pre></td></tr></table></figure>

<h4 id="profile编写"><a href="#profile编写" class="headerlink" title="profile编写"></a>profile编写</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tunables/global&gt;</span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">/usr/bin/kopete &#123;  <span class="comment">//需要限制的应用程序的名称</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;abstractions/X&gt;</span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;abstractions/audio&gt;</span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;abstractions/base&gt;</span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;abstractions/kde&gt;</span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;abstractions/nameservice&gt;</span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;abstractions/user-tmp&gt;</span></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"><span class="comment">//限制其在对家目录下几个文件的读写权限</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">deny @&#123;HOME&#125;/.bash* rw,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">deny @&#123;HOME&#125;/.cshrc rw,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">deny @&#123;HOME&#125;/.profile rw,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">deny @&#123;HOME&#125;/.ssh<span class="comment">/* rw,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line"><span class="comment">deny @&#123;HOME&#125;/.zshrc rw,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line"><span class="comment"></span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line"><span class="comment">//对以下文件具有读、写、或可执行的权限</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line"><span class="comment">/etc/X11/cursors/oxy-white.theme r,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line"><span class="comment">/etc/default/apport r,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line"><span class="comment">/etc/kde4/* r,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line"><span class="comment">/etc/kde4rc r,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line"><span class="comment">/etc/kderc r,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line"><span class="comment">/etc/security/* r,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line"><span class="comment">/etc/ssl/certs/* r,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line"><span class="comment">owner /home/*/</span> r,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">/opt/firefox/firefox.sh Px,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line">/usr/bin/convert rix,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line">/usr/bin/kde4 rix,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line">/usr/bin/kopete r,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">29</span></pre></td><td class="code"><pre><span class="line">/usr/bin/kopete_latexconvert.sh rix,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">30</span></pre></td><td class="code"><pre><span class="line">/usr/bin/launchpad-integration ix,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">31</span></pre></td><td class="code"><pre><span class="line">/usr/bin/xdg-<span class="built_in">open</span> mrix,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">32</span></pre></td><td class="code"><pre><span class="line">/usr/lib/firefox*/firefox.sh Px,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">33</span></pre></td><td class="code"><pre><span class="line">/usr/lib/kde4<span class="comment">/**.so mr,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">34</span></pre></td><td class="code"><pre><span class="line"><span class="comment">/usr/lib/kde4/libexec/drkonqi ix,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">35</span></pre></td><td class="code"><pre><span class="line"><span class="comment">/usr/share/emoticons/ r,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">36</span></pre></td><td class="code"><pre><span class="line"><span class="comment">/usr/share/emoticons/** r,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">37</span></pre></td><td class="code"><pre><span class="line"><span class="comment">/usr/share/enchant/** r,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">38</span></pre></td><td class="code"><pre><span class="line"><span class="comment">/usr/share/kde4/** r,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">39</span></pre></td><td class="code"><pre><span class="line"><span class="comment">/usr/share/kubuntu-default-settings/** r,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">40</span></pre></td><td class="code"><pre><span class="line"><span class="comment">/usr/share/locale-langpack/** r,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">41</span></pre></td><td class="code"><pre><span class="line"><span class="comment">/usr/share/myspell/** r,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">42</span></pre></td><td class="code"><pre><span class="line"><span class="comment">owner @&#123;HOME&#125;/.config/** rwk,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">43</span></pre></td><td class="code"><pre><span class="line"><span class="comment">owner @&#123;HOME&#125;/.kde/** rwlk,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">44</span></pre></td><td class="code"><pre><span class="line"><span class="comment">owner @&#123;HOME&#125;/.local/share/mime/** r,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">45</span></pre></td><td class="code"><pre><span class="line"><span class="comment">owner @&#123;HOME&#125;/.thumbnails/** rw,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">46</span></pre></td><td class="code"><pre><span class="line"><span class="comment">owner @&#123;HOME&#125;/Downloads/ rw,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">47</span></pre></td><td class="code"><pre><span class="line"><span class="comment">owner @&#123;HOME&#125;/Downloads/** rw,</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">48</span></pre></td><td class="code"><pre><span class="line"><span class="comment">&#125;</span></span></pre></td></tr></table></figure>

<p>如果想更详细的学习，参见具体的讲解profile语法格式的文档，如：<a href="http://ubuntuforums.org/showthread.php?t=1008906" target="_blank" rel="noopener">http://ubuntuforums.org/showthread.php?t=1008906</a> </p>
<h1 id="SElinux"><a href="#SElinux" class="headerlink" title="SElinux"></a>SElinux</h1><h2 id="什么是SELinux"><a href="#什么是SELinux" class="headerlink" title="什么是SELinux"></a>什么是SELinux</h2><p>SELinux(Secure Enhanced Linux)：安全增强的Linux 是一个Linux安全策略机制，允许管理员更加灵活的定义安全策略。</p>
<p>SELinux是一个内核级的安全机制，从2.6内核之后，集成到Linux内核中。</p>
<p>SELinux定义了两个基本概念：</p>
<ul>
<li>域：对进程进行限制；</li>
<li>上下文：对文件进行限制；</li>
</ul>
<h2 id="SELinux模式"><a href="#SELinux模式" class="headerlink" title="SELinux模式"></a>SELinux模式</h2><p>SELinux 拥有三个基本的操作模式，当中 Enforcing 是缺省的模式。此外，它还有一个 targeted 或 mls 的修饰语。这管制 SELinux 规则的应用有多广泛，当中 targeted 是较宽松的级别。</p>
<ul>
<li>Enforcing： 这个缺省模式会在系统上启用并实施 SELinux 的安全性政策，拒绝访问及记录行动</li>
<li>Permissive： 在 Permissive 模式下，SELinux 会被启用但不会实施安全性政策，而只会发出警告及记录行动。Permissive 模式在排除 SELinux 的问题时很有用</li>
<li>Disabled： SELinux 已被停用 </li>
</ul>
<p>从上面不难看出，两者在强制模式上作用一样，而SELinux的宽松模式（Permissive）对应着apparmor的complain模式。</p>
<p>SELinux模式可以通过修改配置文件：<code>/etc/sysconfig/selinux</code>进行修改。</p>
<ul>
<li><p>命令getenforce可以查看当前SELinux工作模式。 </p>
</li>
<li><p>命令setenforce可以修改当前SELinux工作模式。 </p>
</li>
</ul>
<h2 id="SELinux的模式查看与修改"><a href="#SELinux的模式查看与修改" class="headerlink" title="SELinux的模式查看与修改"></a>SELinux的模式查看与修改</h2><p>可以通过sestatus命令查看SELinux的状况：</p>
<p><img src="/images/b1/4.png" alt="img"></p>
<p>可以运行如下命令，修改SELinux的运行状态：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">setenforce [ Enforcing | Permissive | 1 | 0 ]</span></pre></td></tr></table></figure>

<h2 id="查看程序或文件的SELinux信息"><a href="#查看程序或文件的SELinux信息" class="headerlink" title="查看程序或文件的SELinux信息"></a>查看程序或文件的SELinux信息</h2><p>常见的属于 <a href="http://www.gnu.org/software/coreutils/manual/html_node/index.html" target="_blank" rel="noopener">coreutils 的工具</a>如 ps、ls 等等，可以通过增加 <code>Z 选项</code>的方式获知 SELinux 方面的信息。如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">[root@PEK1000250612 ygy]<span class="comment"># ps auxZ | grep lldpad</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023 root 48754 0.0  0.0 111636 1016 pts/0 S+ 20:10   0:00 grep lldpad</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">[root@PEK1000250612 ygy]<span class="comment"># ls -Z /usr/lib/gcc/x86_64-redhat-linux/4.4.7/libgomp.so</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">lrwxrwxrwx. root root system_u:object_r:lib_t:s0       /usr/lib/gcc/x86_64-redhat-linux/4.4.7/libgomp.so -&gt; ../../../../lib64/libgomp.so.1.0.0</span></pre></td></tr></table></figure>

<h2 id="配置示例"><a href="#配置示例" class="headerlink" title="配置示例"></a>配置示例</h2><p>需求：让 Apache 可以访问位于非默认目录下的网站文件/data/test</p>
<p>1、先用<code>semanage fcontext -l | grep &#39;/var/www&#39;</code> 获知默认 <code>/var/www</code>目录的 SELinux 上下文：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">&#x2F;var&#x2F;www(&#x2F;.*)? all files system_u:object_r:httpd_sys_content_t:s0</span></pre></td></tr></table></figure>

<p>从中可以看到 Apache 只能访问包含 <code>httpd_sys_content_t</code>标签的文件。假设希望 Apache 使用 /data/test 作为网站文件目录，那么就需要给这个目录下的文件增加 httpd_sys_content_t 标签，分两步实现：</p>
<ul>
<li>/data/test 这个目录下的文件添加默认标签类型</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">semanage fcontext -a -t httpd_sys_content_t &#39;&#x2F;data&#x2F;test(&#x2F;.*)?&#39;</span></pre></td></tr></table></figure>

<ul>
<li>用新的标签类型标注已有文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">restorecon -Rv &#x2F;data&#x2F;test</span></pre></td></tr></table></figure>

<p>之后 Apache 就可以使用该目录下的文件构建网站了。</p>
<p>其中 restorecon 在 SELinux 管理中很常见，起到恢复文件默认标签的作用。比如当从用户主目录下将某个文件复制到 Apache 网站目录下时，Apache 默认是无法访问，因为用户主目录的下的文件标签是 user_home_t。此时就需要 restorecon 将其恢复为可被 Apache 访问的 httpd_sys_content_t 类型：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">restorecon -v &#x2F;data&#x2F;test&#x2F;foo.com&#x2F;html&#x2F;file.html</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">restorecon reset &#x2F;data&#x2F;test&#x2F;foo.com&#x2F;html&#x2F;file.html context unconfined_u:object_r:user_home_t:s0-&gt;system_u:object_r:httpd_sys_co</span></pre></td></tr></table></figure>

<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>SELinux比Apparmor更安全，更灵活，同时配置起来也更复杂。SELinux与Apparmor最大的区别在于：<strong>Apparmor使用文件名（路径名）最为安全标签，而SELinux使用文件的inode作为安全标签，</strong>这就意味着，Apparmor机制可以通过修改文件名而被绕过，另外，在文件系统中，只有inode才具有唯一性。 </p>
<p>初学者建议选择Apparmor而不是SELinux是因为 Apparmor比SELinux更简单，SElinux复杂的语法配置可能令大部分人望而生却。</p>
<p><strong>参考：</strong></p>
<p><a href="http://www.361way.com/apparmor-selinux/3648.html" target="_blank" rel="noopener">http://www.361way.com/apparmor-selinux/3648.html</a></p>
<p><a href="https://docs.docker.com/engine/security/apparmor/" target="_blank" rel="noopener">https://docs.docker.com/engine/security/apparmor/</a></p>
<p><a href="https://blog.csdn.net/ggf123456789/article/details/36686929?depth_1-utm_source=distribute.pc_relevant.none-task&amp;utm_source=distribute.pc_relevant.none-task" target="_blank" rel="noopener">https://blog.csdn.net/ggf123456789/article/details/36686929?depth_1-utm_source=distribute.pc_relevant.none-task&amp;utm_source=distribute.pc_relevant.none-task</a> </p>
<p><a href="http://www.linuxdiyf.com/linux/2148.html" target="_blank" rel="noopener">http://www.linuxdiyf.com/linux/2148.html</a></p>

        
            <div class="donate-container">
    <div class="donate-button">
        <button id="donate-button">赞赏</button>
    </div>
    <div class="donate-img-container hide" id="donate-img-container">
        <img id="donate-img" src="" data-src="/img/donate.jpg">
        <p> 感谢鼓励 </p>
    </div>
</div>
        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        

        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a href="https://github.com/he1m4n6a" target="_blank" rel="noopener">github</a></span>
        <span>/</span>
        
        <span><a href="https://weibo.com/u/1736968374" target="_blank" rel="noopener">weibo</a></span>
        <span>/</span>
        
        <span><a href="#">wechat</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud" target="_blank" rel="noopener">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


    <script>
        /**
         *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
         *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
        */
        if( '' || '')
        var disqus_config = function () {
            this.page.url = '';  // Replace PAGE_URL with your page's canonical URL variable
            this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
        };

        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = 'https://airclouds-blog.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>



</html>
